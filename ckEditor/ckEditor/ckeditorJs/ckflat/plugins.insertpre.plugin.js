CKEDITOR.plugins.add("insertpre",{requires:"dialog",lang:"en",icons:"insertpre",onLoad:function(){CKEDITOR.config.insertpre_class&&CKEDITOR.addCss("pre."+CKEDITOR.config.insertpre_class+" {"+CKEDITOR.config.insertpre_style+"}")},init:function(b){var c=CKEDITOR.config.insertpre_class?"pre( "+CKEDITOR.config.insertpre_class+" )":"pre";b.addCommand("insertpre",new CKEDITOR.dialogCommand("insertpre",{allowedContent:c,requiredContent:c}));b.ui.addButton&&b.ui.addButton("InsertPre",{label:b.lang.insertpre.title,
icon:this.path+"icons/insertpre.png",command:"insertpre",toolbar:"insert,99"});b.contextMenu&&(b.addMenuGroup("code"),b.addMenuItem("insertpre",{label:b.lang.insertpre.edit,icon:this.path+"icons/insertpre.png",command:"insertpre",group:"code"}),b.contextMenu.addListener(function(a){a&&(a=a.getAscendant("pre",!0));return a&&!a.isReadOnly()&&a.hasClass(b.config.insertpre_class)?{insertpre:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("insertpre",function(a){return{title:a.lang.insertpre.title,
minWidth:540,minHeight:380,contents:[{id:"general",label:a.lang.insertpre.code,elements:[{type:"textarea",id:"contents",label:a.lang.insertpre.code,cols:140,rows:22,validate:CKEDITOR.dialog.validate.notEmpty(a.lang.insertpre.notEmpty),required:true,setup:function(a){if(a=a.getHtml()){var b=document.createElement("div");b.innerHTML=a;this.setValue(b.firstChild.nodeValue)}},commit:function(a){a.setHtml(CKEDITOR.tools.htmlEncode(this.getValue()))}}]}],onShow:function(){var b=a.getSelection().getStartElement();
b&&(b=b.getAscendant("pre",true));if(!b||b.getName()!="pre"||!b.hasClass(a.config.insertpre_class)){b=a.document.createElement("pre");this.insertMode=true}else this.insertMode=false;this.pre=b;this.setupContent(this.pre)},onOk:function(){a.config.insertpre_class&&this.pre.setAttribute("class",a.config.insertpre_class);this.insertMode&&a.insertElement(this.pre);this.commitContent(this.pre)}}})}});"undefined"==typeof CKEDITOR.config.insertpre_style&&(CKEDITOR.config.insertpre_style="background-color:#F8F8F8;border:1px solid #DDD;padding:10px;");
"undefined"==typeof CKEDITOR.config.insertpre_class&&(CKEDITOR.config.insertpre_class="prettyprint");